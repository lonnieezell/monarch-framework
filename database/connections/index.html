
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A back-to-basics framework for the modern web.">
      
      
      
      
        <link rel="prev" href="../../using-monarch/validation/">
      
      
        <link rel="next" href="../queries/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Getting Started - Monarch Web Framework</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/github-dark-dimmed.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#database-getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://lonnieezell.github.io/monarch" title="Monarch Web Framework" class="md-header__button md-logo" aria-label="Monarch Web Framework" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Monarch Web Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/lonnieezell/monarch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://lonnieezell.github.io/monarch" title="Monarch Web Framework" class="md-nav__button md-logo" aria-label="Monarch Web Framework" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Monarch Web Framework
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lonnieezell/monarch" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Core Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/routes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Routes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/views/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Views
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/requests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Responses
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Using Monarch
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Using Monarch
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/view_components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/csrf_protection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSRF Protection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/email/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Email
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/middleware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Middleware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/sessions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sessions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../using-monarch/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Database
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Database
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-database-connections" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Database Connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting to the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-connection-type" class="md-nav__link">
    <span class="md-ellipsis">
      Getting the connection type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pdo-access" class="md-nav__link">
    <span class="md-ellipsis">
      PDO Access
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Table Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tableexistsstring-table-bool" class="md-nav__link">
    <span class="md-ellipsis">
      tableExists(string $table): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tables-array" class="md-nav__link">
    <span class="md-ellipsis">
      tables(): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columnsstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      columns(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columnnamesstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      columnNames(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primarykeystring-table-string" class="md-nav__link">
    <span class="md-ellipsis">
      primaryKey(string $table): ?string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createtablestring-table-array-columns-void" class="md-nav__link">
    <span class="md-ellipsis">
      createTable(string $table, array $columns): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#droptablestring-table-void" class="md-nav__link">
    <span class="md-ellipsis">
      dropTable(string $table): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexesstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      indexes(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexexistsstring-table-string-column-bool" class="md-nav__link">
    <span class="md-ellipsis">
      indexExists(string $table, string $column): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreignkeysstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      foreignKeys(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreignkeyexistsstring-table-string-column-bool" class="md-nav__link">
    <span class="md-ellipsis">
      foreignKeyExists(string $table, string $column): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disableforeignkeyconstraints-void" class="md-nav__link">
    <span class="md-ellipsis">
      disableForeignKeyConstraints(): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableforeignkeys-void" class="md-nav__link">
    <span class="md-ellipsis">
      enableForeignKeys(): void
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../queries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query_builder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Builder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extending
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Helpers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Helpers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/arr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/str/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Strings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug Tools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-database-connections" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Database Connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-to-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Connecting to the Database
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Connecting to the Database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-connection-type" class="md-nav__link">
    <span class="md-ellipsis">
      Getting the connection type
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Database
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pdo-access" class="md-nav__link">
    <span class="md-ellipsis">
      PDO Access
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Table Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tableexistsstring-table-bool" class="md-nav__link">
    <span class="md-ellipsis">
      tableExists(string $table): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tables-array" class="md-nav__link">
    <span class="md-ellipsis">
      tables(): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columnsstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      columns(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#columnnamesstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      columnNames(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#primarykeystring-table-string" class="md-nav__link">
    <span class="md-ellipsis">
      primaryKey(string $table): ?string
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#createtablestring-table-array-columns-void" class="md-nav__link">
    <span class="md-ellipsis">
      createTable(string $table, array $columns): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#droptablestring-table-void" class="md-nav__link">
    <span class="md-ellipsis">
      dropTable(string $table): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexesstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      indexes(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexexistsstring-table-string-column-bool" class="md-nav__link">
    <span class="md-ellipsis">
      indexExists(string $table, string $column): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreignkeysstring-table-array" class="md-nav__link">
    <span class="md-ellipsis">
      foreignKeys(string $table): array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreignkeyexistsstring-table-string-column-bool" class="md-nav__link">
    <span class="md-ellipsis">
      foreignKeyExists(string $table, string $column): bool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disableforeignkeyconstraints-void" class="md-nav__link">
    <span class="md-ellipsis">
      disableForeignKeyConstraints(): void
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableforeignkeys-void" class="md-nav__link">
    <span class="md-ellipsis">
      enableForeignKeys(): void
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="database-getting-started">Database: Getting Started</h1>
<p>Monarch provides a very simple wrapper around the <a href="https://www.php.net/manual/en/book.pdo.php">PDO database abstraction layer</a>. This wrapper is designed to be simple and easy to use, while still providing a good level of security and flexibility. Unlike many other database abstraction layers, Monarch does not attempt to hide the underlying database layer, but instead encourages the developer to learn the underlying technology and the SQL language.</p>
<h2 id="configuring-database-connections">Configuring Database Connections</h2>
<p>Database connections are configured in the <code>config/database.php</code> file. This file contains an array of database connections, each of which is an array of connection parameters. The <code>default</code> connection defines which connection is used by default, but you can specify a different connection by passing the connection name to the <code>db()</code> method.</p>
<div class="highlight"><pre><span></span><code><span class="x">return [</span>
<span class="x">    &#39;default&#39; =&gt; &#39;mysql&#39;,</span>
<span class="x">    &#39;mysql&#39; =&gt; [</span>
<span class="x">        &#39;driver&#39; =&gt; env(&#39;DB_DRIVER_DEFAULT&#39;, &#39;mysql&#39;),</span>
<span class="x">        &#39;host&#39; =&gt; env(&#39;DB_HOST_DEFAULT&#39;, &#39;localhost&#39;),</span>
<span class="x">        &#39;port&#39; =&gt; env(&#39;DB_PORT_DEFAULT&#39;, 3306),</span>
<span class="x">        &#39;user&#39; =&gt; env(&#39;DB_USER_DEFAULT&#39;, &#39;root&#39;),</span>
<span class="x">        &#39;password&#39; =&gt; env(&#39;DB_PASSWORD_DEFAULT&#39;, &#39;root&#39;),</span>
<span class="x">        &#39;database&#39; =&gt; env(&#39;DB_DATABASE_DEFAULT&#39;, &#39;app&#39;),</span>
<span class="x">        &#39;charset&#39; =&gt; &#39;utf8mb4&#39;,</span>
<span class="x">    ],</span>
<span class="x">];</span>
</code></pre></div>
<p>As you can see, the values should be set in the <code>.env</code> file. This allows you to easily switch between different database connections by changing the values in the <code>.env</code> file. This is also much more secure than including it in the <code>config/database.php</code> file itself, since the <code>.env</code> file is not saved as part of the repo.</p>
<h2 id="connecting-to-the-database">Connecting to the Database</h2>
<p>Connections happen lazily as they are needed. So, no connection is made until a query is executed. This allows you to define multiple connections in the <code>config/database.php</code> file, but only connect to the database when you need to.</p>
<p>If you need to manually connect to the database, you can call the <code>connect()</code> method on the <code>Connection</code> object. This will establish a connection to the database using the connection parameters defined in the <code>config/database.php</code> file.</p>
<div class="highlight"><pre><span></span><code><span class="x">db()-&gt;connect();</span>
</code></pre></div>
<h3 id="getting-the-connection-type">Getting the connection type</h3>
<p>You can get the connection type by calling the <code>driver()</code> method on the <code>Connection</code> object.</p>
<div class="highlight"><pre><span></span><code><span class="x">$driver = db()-&gt;driver();</span>
<span class="x">// returns: &#39;mysql&#39;</span>
</code></pre></div>
<h2 id="using-the-database">Using the Database</h2>
<p>To use the database, you can call the <code>db()</code> function, which returns a <code>Monarch\Database\Connection</code> object. This object provides a simple wrapper around the PDO database abstraction layer, and allows you to execute queries and fetch results.</p>
<div class="highlight"><pre><span></span><code><span class="x">$users = db()-&gt;query(&#39;SELECT * FROM users&#39;)-&gt;fetchAll();</span>
</code></pre></div>
<p>This uses the default database connection, runs a query against that connection, and fetches all the results. You can also specify a different connection by passing the connection name as the first argument to the <code>db()</code> function.</p>
<div class="highlight"><pre><span></span><code><span class="x">$users = db(&#39;mysql&#39;)-&gt;query(&#39;SELECT * FROM users&#39;)-&gt;fetchAll();</span>
</code></pre></div>
<p>This will use the <code>mysql</code> connection instead of the default connection.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>db()</code> function will return a singleton instance of the <code>Connection</code> object for each unique configuration it uses. This means that you can call the <code>db()</code> function multiple times with the same configuration, and it will return the same <code>Connection</code> object each time. This allows you to easily share the same connection between different parts of your application.</p>
</div>
<h2 id="pdo-access">PDO Access</h2>
<p>If you need to access the underlying PDO object directly, you can do so by grabbing the public <code>pdo</code> instance on the <code>Connection</code> object. This will return the <code>PDO</code> object that is used by the connection.</p>
<div class="highlight"><pre><span></span><code><span class="x">$pdo = db()-&gt;pdo;</span>
</code></pre></div>
<p>This can be useful if you need to access some of the more advanced features of the PDO object that are not exposed by the <code>Connection</code> object.</p>
<h2 id="error-handling">Error Handling</h2>
<p>If an error occurs during the execution of a query, an exception will be thrown. You can catch this exception and handle it as needed.</p>
<div class="highlight"><pre><span></span><code><span class="x">try {</span>
<span class="x">    $users = db()-&gt;run(&#39;SELECT * FROM users&#39;)</span>
<span class="x">        -&gt;fetchAll();</span>
<span class="x">} catch (Exception $e) {</span>
<span class="x">    // Handle the error</span>
<span class="x">}</span>
</code></pre></div>
<p>This will catch any exceptions that are thrown during the execution of the query, and allow you to handle them gracefully. You can then log the error, display an error message to the user, or take any other action that is appropriate.</p>
<h2 id="table-methods">Table Methods</h2>
<p>The database connection provides several methods for working with database tables.</p>
<h3 id="tableexistsstring-table-bool"><code>tableExists(string $table): bool</code></h3>
<p>This method checks if a table exists in the database. It returns <code>true</code> if the table exists, and <code>false</code> if it does not.</p>
<div class="highlight"><pre><span></span><code><span class="x">if (db()-&gt;tableExists(&#39;users&#39;)) {</span>
<span class="x">    // The users table exists</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="tables-array"><code>tables(): array</code></h3>
<p>This method returns an array of all the tables in the database.</p>
<div class="highlight"><pre><span></span><code><span class="x">$tables = db()-&gt;tables();</span>

<span class="x">// returns:</span>
<span class="x">[</span>
<span class="x">    [&#39;name&#39; =&gt; &#39;users&#39;, &#39;view&#39; =&gt; false],</span>
<span class="x">    [&#39;name&#39; =&gt; &#39;posts&#39;, &#39;view&#39; =&gt; false],</span>
<span class="x">    [&#39;name&#39; =&gt; &#39;comments&#39;, &#39;view&#39; =&gt; false],</span>
<span class="x">]</span>
</code></pre></div>
<h3 id="columnsstring-table-array"><code>columns(string $table): array</code></h3>
<p>This method returns an array of all the columns in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">$columns = db()-&gt;columns(&#39;users&#39;);</span>

<span class="x">// returns:</span>
<span class="x">[</span>
<span class="x">    [</span>
<span class="x">        &#39;field&#39; =&gt; &#39;name&#39;,</span>
<span class="x">        &#39;type&#39; =&gt; &#39;varchar(255)&#39;,</span>
<span class="x">        &#39;null&#39; =&gt; true,</span>
<span class="x">        &#39;key&#39; =&gt; null,</span>
<span class="x">        &#39;default&#39; =&gt; null,</span>
<span class="x">        &#39;extra&#39; =&gt; &#39;&#39;,</span>
<span class="x">    ],</span>
<span class="x">]</span>
</code></pre></div>
<h3 id="columnnamesstring-table-array"><code>columnNames(string $table): array</code></h3>
<p>This method returns an array of the column names in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">$columns = db()-&gt;columnNames(&#39;users&#39;);</span>

<span class="x">// returns:</span>
<span class="x">[&#39;name&#39;, &#39;email&#39;, &#39;password&#39;]</span>
</code></pre></div>
<h3 id="primarykeystring-table-string"><code>primaryKey(string $table): ?string</code></h3>
<p>This method returns the primary key of a table, if one exists.</p>
<div class="highlight"><pre><span></span><code><span class="x">$primaryKey = db()-&gt;primaryKey(&#39;users&#39;);</span>

<span class="x">// returns:</span>
<span class="x">&#39;id&#39;</span>
</code></pre></div>
<h3 id="createtablestring-table-array-columns-void"><code>createTable(string $table, array $columns): void</code></h3>
<p>This method creates a new table in the database. The first argument is the name of the table, and the second argument is an array of column definitions.</p>
<div class="highlight"><pre><span></span><code><span class="x">db()-&gt;createTable(&#39;users&#39;, [</span>
<span class="x">    &#39;id INT AUTO_INCREMENT PRIMARY KEY&#39;,</span>
<span class="x">    &#39;name VARCHAR(255) NOT NULL&#39;,</span>
<span class="x">    &#39;email VARCHAR(255) NOT NULL&#39;,</span>
<span class="x">]);</span>
</code></pre></div>
<h3 id="droptablestring-table-void"><code>dropTable(string $table): void</code></h3>
<p>This method drops a table from the database.</p>
<div class="highlight"><pre><span></span><code><span class="x">db()-&gt;dropTable(&#39;users&#39;);</span>
</code></pre></div>
<h3 id="indexesstring-table-array"><code>indexes(string $table): array</code></h3>
<p>This method returns an array of all the indexes in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">$indexes = db()-&gt;indexes(&#39;users&#39;);</span>

<span class="x">// returns:</span>
<span class="x">[</span>
<span class="x">    [&#39;name&#39; =&gt; &#39;PRIMARY&#39;, &#39;unique&#39; =&gt; true, &#39;primary&#39; =&gt; true, &#39;columns&#39; =&gt; [&#39;id&#39;]],</span>
<span class="x">    [&#39;name&#39; =&gt; &#39;email&#39;, &#39;unique&#39; =&gt; false, &#39;primary&#39; =&gt; false, &#39;columns&#39; =&gt; [&#39;email&#39;]],</span>
<span class="x">]</span>
</code></pre></div>
<h3 id="indexexistsstring-table-string-column-bool"><code>indexExists(string $table, string $column): bool</code></h3>
<p>This method checks if an index exists on a column in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">if (db()-&gt;indexExists(&#39;users&#39;, &#39;email&#39;)) {</span>
<span class="x">    // The email index exists</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="foreignkeysstring-table-array"><code>foreignKeys(string $table): array</code></h3>
<p>This method returns an array of all the foreign keys in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">$foreignKeys = db()-&gt;foreignKeys(&#39;users&#39;);</span>

<span class="x">// returns:</span>
<span class="x">[</span>
<span class="x">    [</span>
<span class="x">        &#39;name&#39; =&gt; &#39;users_role_id_foreign&#39;,</span>
<span class="x">        &#39;local&#39; =&gt; &#39;role_id&#39;,</span>
<span class="x">        &#39;table&#39; =&gt; &#39;roles&#39;,</span>
<span class="x">        &#39;foreign&#39; =&gt; &#39;id&#39;,</span>
<span class="x">    ],</span>
<span class="x">]</span>
</code></pre></div>
<h3 id="foreignkeyexistsstring-table-string-column-bool"><code>foreignKeyExists(string $table, string $column): bool</code></h3>
<p>This method checks if a foreign key exists on a column in a table.</p>
<div class="highlight"><pre><span></span><code><span class="x">if (db()-&gt;foreignKeyExists(&#39;users&#39;, &#39;role_id&#39;)) {</span>
<span class="x">    // The role_id foreign key exists</span>
<span class="x">}</span>
</code></pre></div>
<h3 id="disableforeignkeyconstraints-void"><code>disableForeignKeyConstraints(): void</code></h3>
<p>This method disables foreign key constraints for the current connection. This is often used in conjunction with <code>enableForeignKeys()</code> to temporarily disable foreign key constraints while making changes to the database.</p>
<div class="highlight"><pre><span></span><code><span class="x">db()-&gt;disableForeignKeys();</span>
</code></pre></div>
<h3 id="enableforeignkeys-void"><code>enableForeignKeys(): void</code></h3>
<p>This method enables foreign key constraints for the current connection. This is often used in conjunction with <code>disableForeignKeys()</code> to temporarily disable foreign key constraints while making changes to the database.</p>
<div class="highlight"><pre><span></span><code><span class="x">db()-&gt;enableForeignKeys();</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/lonnieezell/monarch" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.8.0/build/highlight.min.js"></script>
      
        <script src="../../assets/js/hljs.js"></script>
      
    
  </body>
</html>